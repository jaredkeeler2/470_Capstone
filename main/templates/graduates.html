{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Graduation Data</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">

    <style>
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /*For Firefox*/
        input[type=number] {
            -moz-appearance: textfield;
        }

        Optional styling for cleaner table/form appearance */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        table {
            border-collapse: collapse;
            width: 50%;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #999;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        button {
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            background-color: #007BFF;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        h1, h2, h3 {
            color: #333;
        }
    </style>

    <script>
        function promptGraduatePassword(event) {
            const password = prompt("Enter graduate submission password:");
            if (password === null) {
                // User cancelled the prompt
                event.preventDefault();
                return false;
            }
            document.getElementById('graduate_password').value = password;
        }
    </script>
</head>

<body>
    <h1>Graduates Data</h1>

    <p>
        <a href="{% if URL_PREFIX %}/{{ URL_PREFIX }}/{% else %}/{% endif %}"><button>Back to Dashboard</button></a>
    </p>

    <hr>

    <h2>High School Graduation Numbers</h2>

    <form method="POST" onsubmit="promptGraduatePassword(event)">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="hidden" name="graduate_password" id="graduate_password">
        <button type="submit">Submit</button>
    </form>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    <hr>

    <h3>Existing Data</h3>
    <table>
        <tr>
            <th>Year</th>
            <th>Graduates</th>
        </tr>
        {% for entry in data %}
            <tr>
                <td>{{ entry.year }}</td>
                <td>{{ entry.graduates }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="2">No data yet.</td>
            </tr>
        {% endfor %}
    </table>
    
    <h4>Anchorage School District Graduation Rates: <a href="https://public.tableau.com/app/profile/asdk12/viz/GraduationRate_16370266007000/ASDGradRateoverview" target="_blank">https://public.tableau.com/app/profile/asdk12/viz/GraduationRate_16370266007000/ASDGradRateoverview</a></h4>
</body>
</html>
